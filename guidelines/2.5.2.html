<!DOCTYPE html>
<html lang="pl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2.5.2 Anulowanie wskazania (A) - Nieoficjalny przewodnik WCAG 2.1</title>
    <link rel="stylesheet" href="../styles.css">
</head>

<body>
    <a href="#main" class="skip-link">Przejd≈∫ do tre≈õci g≈Ç√≥wnej</a>

    <header>
        <!-- Zawarto≈õƒá zostanie za≈Çadowana dynamicznie przez JavaScript -->
    </header>

    <main id="main">
        <article class="criterion-detail">
            <div class="criterion-header">
                <h2>2.5.2 Anulowanie wskazania</h2>
                <p class="criterion-level">Poziom A</p>
                <div class="meta">
                    <p><a href="https://www.w3.org/TR/WCAG21/#pointer-cancellation" target="_blank"
                            rel="noopener">Oficjalna
                            dokumentacja W3C</a></p>
                </div>
            </div>

            <div class="criterion-description">
                <h3>Opis kryterium</h3>
                <p>Dla funkcjonalno≈õci, kt√≥ra mo≈ºe byƒá obs≈Çugiwana za pomocƒÖ pojedynczego wska≈∫nika, co najmniej jedno
                    z nastƒôpujƒÖcych stwierdze≈Ñ jest prawdziwe: brak down-event, przerwanie lub cofniƒôcie, odwr√≥cenie
                    up-event,
                    niezbƒôdno≈õƒá.</p>

                <h3>Intencja</h3>
                <p>Celem tego kryterium sukcesu jest u≈Çatwienie u≈ºytkownikom zapobiegania przypadkowym lub b≈Çƒôdnym
                    aktywacjom wska≈∫nika. Niekt√≥rzy u≈ºytkownicy mogƒÖ:</p>

                <ul>
                    <li><strong>Mieƒá dr≈ºenie rƒÖk</strong> - powodujƒÖce przypadkowe dotkniƒôcia</li>
                    <li><strong>U≈ºywaƒá wiƒôkszych palc√≥w</strong> - kt√≥re mogƒÖ aktywowaƒá niepo≈ºƒÖdane elementy</li>
                    <li><strong>Mieƒá ograniczenia motoryczne</strong> - utrudniajƒÖce precyzyjnƒÖ kontrolƒô</li>
                    <li><strong>U≈ºywaƒá technologii wspomagajƒÖcych</strong> - kt√≥re mogƒÖ powodowaƒá przypadkowe aktywacje
                    </li>
                    <li><strong>Korzystaƒá z ma≈Çych ekran√≥w</strong> - gdzie ≈Çatwo o pomy≈Çki</li>
                    <li><strong>Znajdowaƒá siƒô w ruchu</strong> - np. w transporcie publicznym</li>
                </ul>

                <p>Kryterium zapewnia, ≈ºe u≈ºytkownicy majƒÖ mo≈ºliwo≈õƒá anulowania dzia≈Ça≈Ñ przed ich wykonaniem lub
                    cofniƒôcia ich po wykonaniu.</p>

                <h3>Wymagania</h3>
                <p>Co najmniej jedno z poni≈ºszych musi byƒá spe≈Çnione:</p>
                <ul>
                    <li><strong>Brak down-event</strong> - funkcja nie jest wykonywana na down-event wska≈∫nika</li>
                    <li><strong>Przerwanie lub cofniƒôcie</strong> - funkcja ko≈Ñczy siƒô na up-event i dostƒôpny jest
                        mechanizm przerwania przed zako≈Ñczeniem lub cofniƒôcia po zako≈Ñczeniu</li>
                    <li><strong>Odwr√≥cenie up-event</strong> - up-event odwraca wynik poprzedniego down-event</li>
                    <li><strong>Niezbƒôdno≈õƒá</strong> - wykonanie funkcji na down-event jest niezbƒôdne</li>
                </ul>

                <h3>Definicje</h3>
                <ul>
                    <li><strong>Down-event</strong> - zdarzenie wska≈∫nika wywo≈Çywane gdy urzƒÖdzenie wskazujƒÖce
                        "naciska" cel (mousedown, touchstart, pointerdown)</li>
                    <li><strong>Up-event</strong> - zdarzenie wska≈∫nika wywo≈Çywane gdy urzƒÖdzenie wskazujƒÖce
                        "zwalnia" cel (mouseup, touchend, pointerup)</li>
                    <li><strong>Click-event</strong> - zdarzenie wysokiego poziomu sk≈ÇadajƒÖce siƒô z down-event
                        nastƒôpowanego przez up-event</li>
                    <li><strong>Niezbƒôdny</strong> - usuniƒôcie tego wymagania fundamentalnie zmieni≈Çoby
                        informacjƒô lub funkcjonalno≈õƒá tre≈õci</li>
                </ul>
            </div>

            <div class="examples">
                <h3>Przyk≈Çady</h3>

                <div class="example-container">
                    <div class="example bad">
                        <h4>Z≈Çy przyk≈Çad - brak mo≈ºliwo≈õci anulowania</h4>
                        <p>Funkcje aktywowane na down-event bez mo≈ºliwo≈õci anulowania:</p>

                        <div class="preview">
                            <div class="preview-content"
                                style="border: 1px solid #ccc; padding: 20px; border-radius: 5px; background-color: #fff;">
                                <div
                                    style="background-color: #f8d7da; border: 1px solid #f5c6cb; padding: 15px; border-radius: 5px; margin-bottom: 15px;">
                                    <h5 style="color: #721c24; margin-top: 0;">‚ùå Problematyczne implementacje:</h5>

                                    <div style="margin-bottom: 20px;">
                                        <h6 style="color: #721c24;">1. Przycisk dzia≈ÇajƒÖcy na mousedown</h6>
                                        <div
                                            style="background-color: #fff; border: 2px dashed #dc3545; padding: 15px; border-radius: 4px;">
                                            <button id="bad-button-1"
                                                style="padding: 12px 24px; background: #dc3545; color: white; border: none; border-radius: 4px; cursor: pointer; margin-bottom: 10px;">
                                                ‚ùå Usu≈Ñ konto (aktywny na naci≈õniƒôcie)
                                            </button>
                                            <p style="color: #dc3545; font-size: 0.9em; margin: 0;">
                                                ‚ùå Dzia≈Çanie wykonuje siƒô natychmiast po naci≈õniƒôciu, bez mo≈ºliwo≈õci
                                                anulowania
                                            </p>
                                        </div>
                                    </div>

                                    <div style="margin-bottom: 20px;">
                                        <h6 style="color: #721c24;">2. Link aktywowany na touchstart</h6>
                                        <div
                                            style="background-color: #fff; border: 2px dashed #dc3545; padding: 15px; border-radius: 4px;">
                                            <a href="#" id="bad-link-1"
                                                style="display: inline-block; padding: 10px 20px; background: #dc3545; color: white; text-decoration: none; border-radius: 4px; margin-bottom: 10px;">
                                                ‚ùå Przejd≈∫ do p≈Çatnej us≈Çugi
                                            </a>
                                            <p style="color: #dc3545; font-size: 0.9em; margin: 0;">
                                                ‚ùå Nawigacja uruchamiana przy pierwszym dotyku, nie mo≈ºna cofnƒÖƒá
                                            </p>
                                        </div>
                                    </div>

                                    <div style="margin-bottom: 20px;">
                                        <h6 style="color: #721c24;">3. Menu kontekstowe bez anulowania</h6>
                                        <div
                                            style="background-color: #fff; border: 2px dashed #dc3545; padding: 15px; border-radius: 4px; position: relative;">
                                            <div id="bad-context-area"
                                                style="padding: 20px; background: #f8f9fa; border: 1px solid #dee2e6; border-radius: 4px; margin-bottom: 10px; cursor: context-menu;">
                                                Kliknij prawym przyciskiem myszy
                                            </div>
                                            <div id="bad-context-menu"
                                                style="display: none; position: absolute; background: white; border: 1px solid #ccc; border-radius: 4px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); z-index: 10;">
                                                <button
                                                    style="display: block; width: 100%; padding: 8px 16px; border: none; background: none; text-align: left; cursor: pointer;">Usu≈Ñ
                                                    plik</button>
                                                <button
                                                    style="display: block; width: 100%; padding: 8px 16px; border: none; background: none; text-align: left; cursor: pointer;">Przenie≈õ
                                                    do kosza</button>
                                            </div>
                                            <p style="color: #dc3545; font-size: 0.9em; margin: 0;">
                                                ‚ùå Akcje wykonywane natychmiast po klikniƒôciu bez mo≈ºliwo≈õci cofniƒôcia
                                            </p>
                                        </div>
                                    </div>

                                    <div>
                                        <h6 style="color: #721c24;">4. PrzeciƒÖganie bez mo≈ºliwo≈õci anulowania</h6>
                                        <div
                                            style="background-color: #fff; border: 2px dashed #dc3545; padding: 15px; border-radius: 4px;">
                                            <div
                                                style="display: flex; gap: 20px; align-items: center; margin-bottom: 10px;">
                                                <div id="bad-drag-item"
                                                    style="width: 80px; height: 80px; background: #dc3545; color: white; display: flex; align-items: center; justify-content: center; border-radius: 4px; cursor: move;">
                                                    üìÅ
                                                </div>
                                                <div
                                                    style="width: 100px; height: 80px; border: 2px dashed #6c757d; display: flex; align-items: center; justify-content: center; border-radius: 4px;">
                                                    üóëÔ∏è Kosz
                                                </div>
                                            </div>
                                            <p style="color: #dc3545; font-size: 0.9em; margin: 0;">
                                                ‚ùå Rozpoczƒôcie przeciƒÖgania powoduje natychmiastowe przeniesienie do
                                                kosza
                                            </p>
                                        </div>
                                    </div>
                                </div>

                                <div
                                    style="background-color: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; border-radius: 5px;">
                                    <h6 style="color: #856404; margin-top: 0;">Dlaczego to problematyczne?</h6>
                                    <ul style="color: #856404; margin-bottom: 0;">
                                        <li><strong>Przypadkowe aktywacje</strong> - u≈ºytkownicy mogƒÖ nieumy≈õlnie
                                            wywo≈Çaƒá
                                            destrukcyjne dzia≈Çania</li>
                                        <li><strong>Brak kontroli</strong> - niemo≈ºno≈õƒá cofniƒôcia lub anulowania
                                            dzia≈Çania</li>
                                        <li><strong>Frustration</strong> - szczeg√≥lnie dla os√≥b z ograniczeniami
                                            motorycznymi</li>
                                        <li><strong>Utrata danych</strong> - nieodwracalne dzia≈Çania bez ostrze≈ºenia
                                        </li>
                                        <li><strong>Z≈Çe UX</strong> - brak mo≈ºliwo≈õci poprawienia b≈Çƒôd√≥w</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <pre><code class="language-html">&lt;!-- Z≈ÅY PRZYK≈ÅAD - brak mo≈ºliwo≈õci anulowania --&gt;

&lt;!-- 1. Przycisk dzia≈ÇajƒÖcy na mousedown --&gt;
&lt;button id="delete-account"&gt;Usu≈Ñ konto&lt;/button&gt;
&lt;script&gt;
// Problematyczne - dzia≈Çanie na down-event
document.getElementById('delete-account').addEventListener('mousedown', function() {
    deleteUserAccount(); // Wykonywane natychmiast!
});
&lt;/script&gt;

&lt;!-- 2. Link aktywowany na touchstart --&gt;
&lt;a href="/premium" id="premium-link"&gt;Aktywuj premium&lt;/a&gt;
&lt;script&gt;
// Problematyczne - nawigacja na touchstart
document.getElementById('premium-link').addEventListener('touchstart', function(e) {
    e.preventDefault();
    window.location.href = '/premium'; // Natychmiastowa nawigacja
});
&lt;/script&gt;

&lt;!-- 3. Drag and drop bez anulowania --&gt;
&lt;div class="file" draggable="true"&gt;Wa≈ºny dokument&lt;/div&gt;
&lt;div class="trash-bin"&gt;Kosz&lt;/div&gt;
&lt;script&gt;
// Problematyczne - natychmiastowe usuwanie
document.querySelector('.file').addEventListener('dragstart', function() {
    this.remove(); // Usuniƒôcie od razu przy dragstart
});
&lt;/script&gt;

&lt;!-- 4. Menu kontekstowe bez mo≈ºliwo≈õci anulowania --&gt;
&lt;div id="file-area"&gt;Kliknij prawym przyciskiem&lt;/div&gt;
&lt;script&gt;
document.getElementById('file-area').addEventListener('contextmenu', function(e) {
    e.preventDefault();
    showContextMenu();
});

function showContextMenu() {
    // Menu wykonuje akcje natychmiast po wyborze
    const action = prompt('Wybierz: delete, move, copy');
    if (action === 'delete') {
        deleteFile(); // Brak mo≈ºliwo≈õci cofniƒôcia
    }
}
&lt;/script&gt;</code></pre>

                        <p class="explanation">Problem: Funkcje wykonywane na down-event lub bez mo≈ºliwo≈õci anulowania
                            mogƒÖ prowadziƒá do przypadkowych aktywacji. U≈ºytkownicy nie majƒÖ mo≈ºliwo≈õci cofniƒôcia
                            b≈Çƒôdnych
                            dzia≈Ça≈Ñ, co szczeg√≥lnie problematyczne dla os√≥b z ograniczeniami motorycznymi.</p>
                    </div>
                </div>

                <div class="example-container">
                    <div class="example good">
                        <h4>Dobry przyk≈Çad - mo≈ºliwo≈õƒá anulowania dzia≈Ça≈Ñ</h4>
                        <p>Implementacje umo≈ºliwiajƒÖce anulowanie lub cofniƒôcie dzia≈Ça≈Ñ:</p>

                        <div class="preview">
                            <div class="preview-content"
                                style="border: 1px solid #ccc; padding: 20px; border-radius: 5px; background-color: #fff;">
                                <div
                                    style="background-color: #d4edda; border: 1px solid #c3e6cb; padding: 15px; border-radius: 5px; margin-bottom: 15px;">
                                    <h5 style="color: #155724; margin-top: 0;">‚úÖ Dostƒôpne implementacje:</h5>

                                    <div style="margin-bottom: 20px;">
                                        <h6 style="color: #155724;">1. Przycisk z mo≈ºliwo≈õciƒÖ anulowania</h6>
                                        <div
                                            style="background-color: #fff; border: 2px solid #28a745; padding: 15px; border-radius: 4px;">
                                            <button id="good-button-1"
                                                style="padding: 12px 24px; background: #28a745; color: white; border: none; border-radius: 4px; cursor: pointer; margin-bottom: 10px; position: relative; transition: transform 0.1s;">
                                                ‚úÖ Usu≈Ñ konto (trzymaj i zwolnij)
                                            </button>
                                            <div id="cancel-hint-1"
                                                style="display: none; color: #28a745; font-size: 0.8em; margin-top: 5px;">
                                                üí° PrzeciƒÖgnij poza przycisk aby anulowaƒá
                                            </div>
                                            <p style="color: #28a745; font-size: 0.9em; margin: 10px 0 0 0;">
                                                ‚úÖ Dzia≈Çanie na up-event, mo≈ºliwo≈õƒá anulowania przez przeciƒÖgniƒôcie poza
                                                przycisk
                                            </p>
                                        </div>
                                    </div>

                                    <div style="margin-bottom: 20px;">
                                        <h6 style="color: #155724;">2. Link z potwierdzeniem</h6>
                                        <div
                                            style="background-color: #fff; border: 2px solid #28a745; padding: 15px; border-radius: 4px;">
                                            <a href="#" id="good-link-1"
                                                style="display: inline-block; padding: 10px 20px; background: #28a745; color: white; text-decoration: none; border-radius: 4px; margin-bottom: 10px;">
                                                ‚úÖ Aktywuj premium (z potwierdzeniem)
                                            </a>
                                            <div id="confirmation-dialog-1"
                                                style="display: none; background: #fff; border: 1px solid #ccc; padding: 15px; border-radius: 4px; margin-top: 10px; box-shadow: 0 2px 10px rgba(0,0,0,0.1);">
                                                <p style="margin: 0 0 10px 0;">Czy na pewno chcesz aktywowaƒá premium?
                                                </p>
                                                <button id="confirm-premium"
                                                    style="padding: 6px 12px; background: #28a745; color: white; border: none; border-radius: 3px; cursor: pointer; margin-right: 8px;">Tak</button>
                                                <button id="cancel-premium"
                                                    style="padding: 6px 12px; background: #6c757d; color: white; border: none; border-radius: 3px; cursor: pointer;">Anuluj</button>
                                            </div>
                                            <p style="color: #28a745; font-size: 0.9em; margin: 10px 0 0 0;">
                                                ‚úÖ Wy≈õwietla dialog potwierdzenia z mo≈ºliwo≈õciƒÖ anulowania
                                            </p>
                                        </div>
                                    </div>

                                    <div style="margin-bottom: 20px;">
                                        <h6 style="color: #155724;">3. Menu kontekstowe z cofniƒôciem</h6>
                                        <div
                                            style="background-color: #fff; border: 2px solid #28a745; padding: 15px; border-radius: 4px; position: relative;">
                                            <div id="good-context-area"
                                                style="padding: 20px; background: #f8f9fa; border: 1px solid #28a745; border-radius: 4px; margin-bottom: 10px; cursor: context-menu;">
                                                Kliknij prawym przyciskiem myszy
                                            </div>
                                            <div id="good-context-menu"
                                                style="display: none; position: absolute; background: white; border: 1px solid #ccc; border-radius: 4px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); z-index: 10;">
                                                <button id="context-delete"
                                                    style="display: block; width: 100%; padding: 8px 16px; border: none; background: none; text-align: left; cursor: pointer;">Usu≈Ñ
                                                    plik</button>
                                                <button
                                                    style="display: block; width: 100%; padding: 8px 16px; border: none; background: none; text-align: left; cursor: pointer;">Przenie≈õ
                                                    do kosza</button>
                                            </div>
                                            <div id="undo-notification"
                                                style="display: none; background: #fff3cd; border: 1px solid #ffeaa7; padding: 10px; border-radius: 4px; margin-top: 10px;">
                                                <span>Plik zosta≈Ç usuniƒôty.</span>
                                                <button id="undo-delete"
                                                    style="padding: 4px 8px; background: #ffc107; border: none; border-radius: 3px; cursor: pointer; margin-left: 10px;">Cofnij</button>
                                            </div>
                                            <p style="color: #28a745; font-size: 0.9em; margin: 10px 0 0 0;">
                                                ‚úÖ Wykonuje akcjƒô z mo≈ºliwo≈õciƒÖ cofniƒôcia w ciƒÖgu 5 sekund
                                            </p>
                                        </div>
                                    </div>

                                    <div>
                                        <h6 style="color: #155724;">4. PrzeciƒÖganie z anulowaniem</h6>
                                        <div
                                            style="background-color: #fff; border: 2px solid #28a745; padding: 15px; border-radius: 4px;">
                                            <div
                                                style="display: flex; gap: 20px; align-items: center; margin-bottom: 10px;">
                                                <div id="good-drag-item"
                                                    style="width: 80px; height: 80px; background: #28a745; color: white; display: flex; align-items: center; justify-content: center; border-radius: 4px; cursor: move; transition: transform 0.2s;">
                                                    üìÅ
                                                </div>
                                                <div id="good-trash-bin"
                                                    style="width: 100px; height: 80px; border: 2px dashed #6c757d; display: flex; align-items: center; justify-content: center; border-radius: 4px;">
                                                    üóëÔ∏è Kosz
                                                </div>
                                            </div>
                                            <div id="drag-feedback"
                                                style="color: #28a745; font-size: 0.8em; margin-top: 5px; min-height: 20px;">
                                                PrzeciƒÖgnij plik do kosza (pu≈õƒá poza koszem aby anulowaƒá)
                                            </div>
                                            <p style="color: #28a745; font-size: 0.9em; margin: 10px 0 0 0;">
                                                ‚úÖ Akcja wykonywana dopiero na drop, mo≈ºliwo≈õƒá anulowania przez
                                                puszczenie poza celem
                                            </p>
                                        </div>
                                    </div>
                                </div>

                                <div
                                    style="background-color: #e7f3ff; border: 1px solid #b8daff; padding: 15px; border-radius: 5px;">
                                    <h6 style="color: #004085; margin-top: 0;">Zalety dostƒôpnej implementacji:</h6>
                                    <ul style="color: #004085; margin-bottom: 0;">
                                        <li><strong>Kontrola u≈ºytkownika</strong> - mo≈ºliwo≈õƒá anulowania przed
                                            wykonaniem</li>
                                        <li><strong>Zapobieganie b≈Çƒôdom</strong> - redukcja przypadkowych aktywacji</li>
                                        <li><strong>Opcja cofniƒôcia</strong> - mo≈ºliwo≈õƒá przywr√≥cenia stanu po dzia≈Çaniu
                                        </li>
                                        <li><strong>Lepsza dostƒôpno≈õƒá</strong> - szczeg√≥lnie dla os√≥b z ograniczeniami
                                            motorycznymi</li>
                                        <li><strong>Increased confidence</strong> - u≈ºytkownicy mogƒÖ eksperymentowaƒá bez
                                            strachu</li>
                                    </ul>
                                </div>
                            </div>
                        </div>

                        <pre><code class="language-html">&lt;!-- DOBRY PRZYK≈ÅAD - mo≈ºliwo≈õƒá anulowania --&gt;

&lt;!-- 1. Przycisk z anulowaniem przez przeciƒÖgniƒôcie --&gt;
&lt;button id="delete-account-safe"&gt;Usu≈Ñ konto&lt;/button&gt;
&lt;script&gt;
let isPressed = false;
const button = document.getElementById('delete-account-safe');

// Dzia≈Çanie na up-event, nie down-event
button.addEventListener('pointerdown', function(e) {
    isPressed = true;
    this.classList.add('pressed');
    this.textContent = 'Zwolnij aby potwierdziƒá...';
});

button.addEventListener('pointerup', function(e) {
    if (isPressed) {
        // Sprawd≈∫ czy cursor jest wciƒÖ≈º nad przyciskiem
        const rect = this.getBoundingClientRect();
        const x = e.clientX;
        const y = e.clientY;
        
        if (x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom) {
            // Wykonaj dzia≈Çanie tylko je≈õli up-event nastƒÖpi≈Ç nad przyciskiem
            deleteUserAccount();
        }
    }
    resetButton();
});

// Anulowanie przez opuszczenie przycisku
button.addEventListener('pointerleave', function() {
    if (isPressed) {
        resetButton();
    }
});

function resetButton() {
    isPressed = false;
    button.classList.remove('pressed');
    button.textContent = 'Usu≈Ñ konto';
}
&lt;/script&gt;

&lt;!-- 2. Link z dialogiem potwierdzenia --&gt;
&lt;a href="/premium" id="premium-link-safe"&gt;Aktywuj premium&lt;/a&gt;
&lt;script&gt;
document.getElementById('premium-link-safe').addEventListener('click', function(e) {
    e.preventDefault(); // Zatrzymaj domy≈õlnƒÖ nawigacjƒô
    
    // Poka≈º dialog potwierdzenia
    const confirmed = confirm('Czy na pewno chcesz aktywowaƒá premium za $9.99/miesiƒÖc?');
    if (confirmed) {
        window.location.href = this.href;
    }
    // Je≈õli nie potwierdzone - nic siƒô nie dzieje
});
&lt;/script&gt;

&lt;!-- 3. Akcje z mo≈ºliwo≈õciƒÖ cofniƒôcia --&gt;
&lt;button id="delete-file-safe"&gt;Usu≈Ñ plik&lt;/button&gt;
&lt;div id="undo-container" style="display: none;"&gt;
    &lt;span&gt;Plik zosta≈Ç usuniƒôty. &lt;/span&gt;
    &lt;button id="undo-delete"&gt;Cofnij&lt;/button&gt;
&lt;/div&gt;

&lt;script&gt;
let deletedFileData = null;

document.getElementById('delete-file-safe').addEventListener('click', function() {
    // Zapisz dane przed usuniƒôciem
    deletedFileData = getCurrentFileData();
    
    // Wykonaj usuniƒôcie
    deleteFile();
    
    // Poka≈º opcjƒô cofniƒôcia
    showUndoOption();
    
    // Automatycznie ukryj po 10 sekundach
    setTimeout(hideUndoOption, 10000);
});

document.getElementById('undo-delete').addEventListener('click', function() {
    if (deletedFileData) {
        restoreFile(deletedFileData);
        deletedFileData = null;
        hideUndoOption();
    }
});

function showUndoOption() {
    document.getElementById('undo-container').style.display = 'block';
}

function hideUndoOption() {
    document.getElementById('undo-container').style.display = 'none';
    deletedFileData = null;
}
&lt;/script&gt;

&lt;!-- 4. Drag and drop z anulowaniem --&gt;
&lt;div class="file" draggable="true" id="draggable-file"&gt;Wa≈ºny dokument&lt;/div&gt;
&lt;div class="trash-bin" id="trash-zone"&gt;Kosz&lt;/div&gt;

&lt;script&gt;
let draggedElement = null;

document.getElementById('draggable-file').addEventListener('dragstart', function(e) {
    draggedElement = this;
    this.style.opacity = '0.5';
    // Nie wykonuj ≈ºadnej akcji przy dragstart
});

document.getElementById('draggable-file').addEventListener('dragend', function(e) {
    this.style.opacity = '1';
    draggedElement = null;
    // Reset bez wykonywania akcji je≈õli nie upuszczono na celu
});

document.getElementById('trash-zone').addEventListener('dragover', function(e) {
    e.preventDefault(); // Pozw√≥l na drop
});

document.getElementById('trash-zone').addEventListener('drop', function(e) {
    e.preventDefault();
    if (draggedElement) {
        // Dopiero teraz wykonaj akcjƒô
        moveToTrash(draggedElement);
    }
});
&lt;/script&gt;</code></pre>

                        <p class="explanation">RozwiƒÖzanie: Dzia≈Çania wykonywane na up-event z mo≈ºliwo≈õciƒÖ anulowania
                            przez przeciƒÖgniƒôcie poza element, dialogi potwierdzenia, lub mechanizmy cofniƒôcia.
                            U≈ºytkownicy
                            majƒÖ pe≈ÇnƒÖ kontrolƒô nad swoimi dzia≈Çaniami.</p>
                    </div>
                </div>
            </div>

            <div class="testing">
                <h3>Testowanie zgodno≈õci z 2.5.2</h3>

                <h4>Procedura testowa</h4>
                <ol>
                    <li><strong>Identyfikacja zdarze≈Ñ wska≈∫nika</strong>
                        <ul>
                            <li>Znajd≈∫ wszystkie elementy u≈ºywajƒÖce down-event (mousedown, touchstart, pointerdown)</li>
                            <li>Sprawd≈∫ funkcje aktywowane przez pojedyncze wska≈∫niki</li>
                            <li>Zidentyfikuj destrukcyjne lub nieodwracalne dzia≈Çania</li>
                        </ul>
                    </li>
                    <li><strong>Test anulowania</strong>
                        <ul>
                            <li>Naci≈õnij element i przeciƒÖgnij poza jego obszar przed zwolnieniem</li>
                            <li>Sprawd≈∫ czy dzia≈Çanie zosta≈Ço anulowane</li>
                            <li>Przetestuj na r√≥≈ºnych urzƒÖdzeniach (mysz, dotyk)</li>
                        </ul>
                    </li>
                    <li><strong>Test mechanizm√≥w cofniƒôcia</strong>
                        <ul>
                            <li>Wykonaj dzia≈Çania i sprawd≈∫ dostƒôpno≈õƒá opcji "Cofnij"</li>
                            <li>Zweryfikuj dzia≈Çanie przycisk√≥w "Undo" lub "Anuluj"</li>
                            <li>Sprawd≈∫ dialogi potwierdzenia</li>
                        </ul>
                    </li>
                    <li><strong>Weryfikacja wyjƒÖtk√≥w</strong>
                        <ul>
                            <li>Sprawd≈∫ czy down-event jest rzeczywi≈õcie niezbƒôdny</li>
                            <li>Oce≈Ñ funkcje jak klawiatura ekranowa, instrumenty muzyczne</li>
                            <li>Zweryfikuj gry wymagajƒÖce natychmiastowej reakcji</li>
                        </ul>
                    </li>
                </ol>

                <h4>Narzƒôdzia testowe</h4>
                <ul>
                    <li><strong>DevTools</strong> - monitorowanie zdarze≈Ñ wska≈∫nika</li>
                    <li><strong>Lighthouse</strong> - audit dostƒôpno≈õci interakcji</li>
                    <li><strong>Simulatory dr≈ºenia</strong> - testowanie z niestabilnymi ruchami</li>
                    <li><strong>Mobile testing</strong> - sprawdzanie na urzƒÖdzeniach dotykowych</li>
                    <li><strong>Automated testing</strong> - skrypty sprawdzajƒÖce event handlery</li>
                </ul>

                <h4>Checklist zgodno≈õci</h4>
                <div
                    style="background-color: #f8f9fa; border: 1px solid #dee2e6; padding: 20px; border-radius: 5px; margin: 20px 0;">
                    <h5>‚úÖ Kryteria do spe≈Çnienia:</h5>
                    <ul style="list-style: none; padding-left: 0;">
                        <li>‚òê Funkcje wykonywane na up-event, nie down-event</li>
                        <li>‚òê Mo≈ºliwo≈õƒá anulowania przez przeciƒÖgniƒôcie poza element</li>
                        <li>‚òê Dialogi potwierdzenia dla destrukcyjnych dzia≈Ça≈Ñ</li>
                        <li>‚òê Mechanizmy cofniƒôcia (Undo) dostƒôpne po wykonaniu</li>
                        <li>‚òê Up-event odwraca skutki down-event</li>
                        <li>‚òê Down-event u≈ºywane tylko gdy niezbƒôdne</li>
                        <li>‚òê Brak przypadkowych aktywacji przy lekkim dotyku</li>
                        <li>‚òê Dzia≈Çania odwracalne w rozsƒÖdnym czasie</li>
                    </ul>
                </div>
            </div>

            <div class="implementation-guidelines">
                <h3>Wytyczne implementacyjne</h3>

                <h4>Najlepsze praktyki anulowania:</h4>
                <ul>
                    <li><strong>Preferuj up-event</strong> - u≈ºywaj click, mouseup, touchend zamiast down-event</li>
                    <li><strong>Implementuj drag-to-cancel</strong> - pozw√≥l anulowaƒá przez przeciƒÖgniƒôcie</li>
                    <li><strong>Dodaj konfirmacje</strong> - dla destrukcyjnych dzia≈Ça≈Ñ u≈ºywaj dialog√≥w</li>
                    <li><strong>Oferuj Undo</strong> - mechanizmy cofniƒôcia w rozsƒÖdnym czasie</li>
                    <li><strong>Wyra≈∫ne feedback</strong> - informuj o mo≈ºliwo≈õci anulowania</li>
                    <li><strong>Testuj z r√≥≈ºnymi urzƒÖdzeniami</strong> - mysz, dotyk, rysik</li>
                </ul>

                <h4>Wzorce implementacji:</h4>
                <div
                    style="background-color: #e7f3ff; border: 1px solid #b8daff; padding: 15px; border-radius: 5px; margin: 15px 0;">
                    <h5 style="color: #004085; margin-top: 0;">Drag-to-cancel pattern</h5>
                    <pre style="color: #004085; font-size: 0.9em;"><code>button.addEventListener('pointerdown', startAction);
button.addEventListener('pointerup', completeAction);
button.addEventListener('pointerleave', cancelAction);</code></pre>
                </div>

                <div
                    style="background-color: #d4edda; border: 1px solid #c3e6cb; padding: 15px; border-radius: 5px; margin: 15px 0;">
                    <h5 style="color: #155724; margin-top: 0;">Confirmation dialog pattern</h5>
                    <pre style="color: #155724; font-size: 0.9em;"><code>function performDestructiveAction() {
    if (confirm('Czy na pewno?')) {
        executeAction();
    }
}</code></pre>
                </div>

                <div
                    style="background-color: #fff3cd; border: 1px solid #ffeaa7; padding: 15px; border-radius: 5px; margin: 15px 0;">
                    <h5 style="color: #856404; margin-top: 0;">Undo mechanism pattern</h5>
                    <pre style="color: #856404; font-size: 0.9em;"><code>function deleteWithUndo(item) {
    const backup = saveItemState(item);
    removeItem(item);
    showUndoNotification(() => restoreItem(backup));
}</code></pre>
                </div>

                <h4>Przypadki wymagajƒÖce down-event (wyjƒÖtki):</h4>
                <ul>
                    <li><strong>Klawiatura ekranowa</strong> - natychmiastowa reakcja na naci≈õniƒôcie</li>
                    <li><strong>Instrumenty muzyczne</strong> - wa≈ºny timing d≈∫wiƒôku</li>
                    <li><strong>Gry reakcyjne</strong> - szybka odpowied≈∫ kluczowa dla rozgrywki</li>
                    <li><strong>Rysowanie/malowanie</strong> - ≈õledzenie ruchu od pierwszego kontaktu</li>
                    <li><strong>Przewijanie</strong> - natychmiastowa reakcja na drag</li>
                </ul>

                <h4>Implementacja krok po kroku:</h4>
                <ol>
                    <li><strong>Audit istniejƒÖcych event handlers</strong> - znajd≈∫ wszystkie down-event</li>
                    <li><strong>Przenie≈õ logikƒô na up-event</strong> - zmie≈Ñ mousedown na click</li>
                    <li><strong>Dodaj drag-to-cancel</strong> - obs≈Çuga pointerleave</li>
                    <li><strong>Implementuj dialogi</strong> - dla destrukcyjnych dzia≈Ça≈Ñ</li>
                    <li><strong>Dodaj mechanizmy Undo</strong> - dla nieodwracalnych akcji</li>
                    <li><strong>Przetestuj na urzƒÖdzeniach</strong> - sprawd≈∫ wszystkie scenariusze</li>
                </ol>

                <h4>Czƒôste b≈Çƒôdy do unikniƒôcia:</h4>
                <ul>
                    <li><strong>U≈ºywanie mousedown dla wszystkich akcji</strong> - preferuj click</li>
                    <li><strong>Brak feedback'u o mo≈ºliwo≈õci anulowania</strong> - informuj u≈ºytkownik√≥w</li>
                    <li><strong>Nieodwracalne dzia≈Çania bez potwierdzenia</strong> - dodaj dialogi</li>
                    <li><strong>Kr√≥tki czas na Undo</strong> - daj u≈ºytkownikom wystarczajƒÖco czasu</li>
                    <li><strong>Ignorowanie touch events</strong> - testuj na urzƒÖdzeniach mobilnych</li>
                </ul>
            </div>

            <div class="resources">
                <h3>Dodatkowe zasoby</h3>
                <ul>
                    <li><a href="https://www.w3.org/WAI/WCAG21/Understanding/pointer-cancellation.html" target="_blank"
                            rel="noopener">Zrozumieƒá WCAG 2.1: Anulowanie wskazania</a></li>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Web/API/Pointer_events" target="_blank"
                            rel="noopener">MDN: Pointer Events API</a></li>
                    <li><a href="https://www.w3.org/WAI/WCAG21/Techniques/general/G210" target="_blank"
                            rel="noopener">Techniki WCAG: Zapewnienie anulowania dla dzia≈Ça≈Ñ wska≈∫nika</a></li>
                    <li><a href="https://inclusive-components.design/" target="_blank" rel="noopener">Inclusive
                            Components</a></li>
                    <li><a href="https://webaim.org/articles/motor/" target="_blank" rel="noopener">WebAIM: Motor
                            Disabilities</a></li>
                </ul>
            </div>

            <nav class="criterion-nav" aria-label="Nawigacja kryteri√≥w">
                <ul>
                    <li><a href="2.5.1.html">Poprzedni: 2.5.1 Gesty wskazujƒÖce</a></li>
                    <li><a href="2.5.html">Powr√≥t do sekcji: 2.5 Sposoby wprowadzania danych</a></li>
                    <li><a href="../wytyczne.html">Powr√≥t do listy wytycznych</a></li>
                </ul>
            </nav>
        </article>
    </main>

    <footer>
        <!-- Zawarto≈õƒá zostanie za≈Çadowana dynamicznie przez JavaScript -->
    </footer>

    <script src="../script.js"></script>

    <script>
        // Demo funkcjonalno≈õƒá dla przyk≈Çad√≥w anulowania wskazania
        document.addEventListener('DOMContentLoaded', function () {

            // === PRZYK≈ÅAD Z≈ÅEGO PRZYCISKU (mousedown) ===
            const badButton1 = document.getElementById('bad-button-1');
            if (badButton1) {
                badButton1.addEventListener('mousedown', function () {
                    this.style.background = '#a71e2a';
                    this.textContent = '‚ùå Usuniƒôto konto!';
                    setTimeout(() => {
                        this.style.background = '#dc3545';
                        this.textContent = '‚ùå Usu≈Ñ konto (aktywny na naci≈õniƒôcie)';
                    }, 2000);
                });
            }

            // === PRZYK≈ÅAD Z≈ÅEGO LINKU (touchstart) ===
            const badLink1 = document.getElementById('bad-link-1');
            if (badLink1) {
                badLink1.addEventListener('touchstart', function (e) {
                    e.preventDefault();
                    this.style.background = '#a71e2a';
                    this.textContent = '‚ùå Przekierowanie...';
                    setTimeout(() => {
                        this.style.background = '#dc3545';
                        this.textContent = '‚ùå Przejd≈∫ do p≈Çatnej us≈Çugi';
                    }, 2000);
                });
            }

            // === PRZYK≈ÅAD Z≈ÅEGO MENU KONTEKSTOWEGO ===
            const badContextArea = document.getElementById('bad-context-area');
            const badContextMenu = document.getElementById('bad-context-menu');
            if (badContextArea && badContextMenu) {
                badContextArea.addEventListener('contextmenu', function (e) {
                    e.preventDefault();
                    badContextMenu.style.display = 'block';
                    badContextMenu.style.left = e.offsetX + 'px';
                    badContextMenu.style.top = e.offsetY + 'px';
                });

                badContextMenu.addEventListener('click', function (e) {
                    if (e.target.tagName === 'BUTTON') {
                        alert('‚ùå ' + e.target.textContent + ' - wykonano bez mo≈ºliwo≈õci cofniƒôcia!');
                        this.style.display = 'none';
                    }
                });

                document.addEventListener('click', function () {
                    badContextMenu.style.display = 'none';
                });
            }

            // === PRZYK≈ÅAD DOBREGO PRZYCISKU Z ANULOWANIEM ===
            const goodButton1 = document.getElementById('good-button-1');
            const cancelHint1 = document.getElementById('cancel-hint-1');
            let isPressed = false;

            if (goodButton1) {
                goodButton1.addEventListener('pointerdown', function (e) {
                    e.preventDefault();
                    isPressed = true;
                    this.style.transform = 'scale(0.95)';
                    this.style.background = '#1e7e34';
                    this.textContent = '‚úÖ Zwolnij aby potwierdziƒá...';
                    cancelHint1.style.display = 'block';
                });

                goodButton1.addEventListener('pointerup', function (e) {
                    if (isPressed) {
                        const rect = this.getBoundingClientRect();
                        const x = e.clientX;
                        const y = e.clientY;

                        if (x >= rect.left && x <= rect.right && y >= rect.top && y <= rect.bottom) {
                            // Wykonaj dzia≈Çanie
                            this.textContent = '‚úÖ Konto zosta≈Ço usuniƒôte!';
                            setTimeout(() => resetButton(), 2000);
                        } else {
                            // Anulowano
                            this.textContent = '‚úÖ Anulowano!';
                            setTimeout(() => resetButton(), 1000);
                        }
                    }
                    isPressed = false;
                });

                goodButton1.addEventListener('pointerleave', function () {
                    if (isPressed) {
                        this.textContent = '‚úÖ Anulowano przez przeciƒÖgniƒôcie!';
                        setTimeout(() => resetButton(), 1000);
                        isPressed = false;
                    }
                });

                function resetButton() {
                    goodButton1.style.transform = 'scale(1)';
                    goodButton1.style.background = '#28a745';
                    goodButton1.textContent = '‚úÖ Usu≈Ñ konto (trzymaj i zwolnij)';
                    cancelHint1.style.display = 'none';
                }
            }

            // === PRZYK≈ÅAD DOBREGO LINKU Z POTWIERDZENIEM ===
            const goodLink1 = document.getElementById('good-link-1');
            const confirmationDialog1 = document.getElementById('confirmation-dialog-1');
            const confirmPremium = document.getElementById('confirm-premium');
            const cancelPremium = document.getElementById('cancel-premium');

            if (goodLink1 && confirmationDialog1) {
                goodLink1.addEventListener('click', function (e) {
                    e.preventDefault();
                    confirmationDialog1.style.display = 'block';
                });

                confirmPremium.addEventListener('click', function () {
                    alert('‚úÖ Premium zosta≈Ço aktywowane!');
                    confirmationDialog1.style.display = 'none';
                });

                cancelPremium.addEventListener('click', function () {
                    confirmationDialog1.style.display = 'none';
                });
            }

            // === PRZYK≈ÅAD DOBREGO MENU Z COFNIƒòCIEM ===
            const goodContextArea = document.getElementById('good-context-area');
            const goodContextMenu = document.getElementById('good-context-menu');
            const contextDelete = document.getElementById('context-delete');
            const undoNotification = document.getElementById('undo-notification');
            const undoDelete = document.getElementById('undo-delete');

            if (goodContextArea && goodContextMenu) {
                goodContextArea.addEventListener('contextmenu', function (e) {
                    e.preventDefault();
                    goodContextMenu.style.display = 'block';
                    goodContextMenu.style.left = e.offsetX + 'px';
                    goodContextMenu.style.top = e.offsetY + 'px';
                });

                contextDelete.addEventListener('click', function () {
                    goodContextMenu.style.display = 'none';
                    undoNotification.style.display = 'block';
                    setTimeout(() => {
                        undoNotification.style.display = 'none';
                    }, 5000);
                });

                undoDelete.addEventListener('click', function () {
                    undoNotification.style.display = 'none';
                    alert('‚úÖ Plik zosta≈Ç przywr√≥cony!');
                });

                document.addEventListener('click', function (e) {
                    if (!goodContextMenu.contains(e.target) && e.target !== goodContextArea) {
                        goodContextMenu.style.display = 'none';
                    }
                });
            }

            // === PRZYK≈ÅAD DOBREGO DRAG AND DROP ===
            const goodDragItem = document.getElementById('good-drag-item');
            const goodTrashBin = document.getElementById('good-trash-bin');
            const dragFeedback = document.getElementById('drag-feedback');
            let isDragging = false;

            if (goodDragItem && goodTrashBin) {
                goodDragItem.addEventListener('dragstart', function (e) {
                    isDragging = true;
                    this.style.opacity = '0.5';
                    this.style.transform = 'rotate(5deg)';
                    dragFeedback.textContent = 'üìÅ PrzeciƒÖganie w toku... Pu≈õƒá nad koszem aby usunƒÖƒá';
                    dragFeedback.style.color = '#007bff';
                });

                goodDragItem.addEventListener('dragend', function (e) {
                    this.style.opacity = '1';
                    this.style.transform = 'rotate(0deg)';
                    if (isDragging) {
                        dragFeedback.textContent = '‚úÖ PrzeciƒÖganie anulowane';
                        dragFeedback.style.color = '#28a745';
                        setTimeout(() => {
                            dragFeedback.textContent = 'PrzeciƒÖgnij plik do kosza (pu≈õƒá poza koszem aby anulowaƒá)';
                            dragFeedback.style.color = '#28a745';
                        }, 2000);
                    }
                    isDragging = false;
                });

                goodTrashBin.addEventListener('dragover', function (e) {
                    e.preventDefault();
                    this.style.borderColor = '#dc3545';
                    this.style.background = '#ffe6e6';
                    dragFeedback.textContent = 'üóëÔ∏è Pu≈õƒá tutaj aby usunƒÖƒá plik';
                    dragFeedback.style.color = '#dc3545';
                });

                goodTrashBin.addEventListener('dragleave', function (e) {
                    this.style.borderColor = '#6c757d';
                    this.style.background = 'transparent';
                    dragFeedback.textContent = 'üìÅ PrzeciƒÖganie w toku...';
                    dragFeedback.style.color = '#007bff';
                });

                goodTrashBin.addEventListener('drop', function (e) {
                    e.preventDefault();
                    this.style.borderColor = '#6c757d';
                    this.style.background = 'transparent';
                    isDragging = false;
                    dragFeedback.textContent = '‚úÖ Plik zosta≈Ç usuniƒôty! (mo≈ºliwo≈õƒá cofniƒôcia przez 10 sekund)';
                    dragFeedback.style.color = '#dc3545';

                    setTimeout(() => {
                        dragFeedback.textContent = 'PrzeciƒÖgnij plik do kosza (pu≈õƒá poza koszem aby anulowaƒá)';
                        dragFeedback.style.color = '#28a745';
                    }, 3000);
                });
            }
        });
    </script>
</body>

</html>