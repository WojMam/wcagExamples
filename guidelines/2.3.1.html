<!DOCTYPE html>
<html lang="pl">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>2.3.1 Trzy byski lub poni偶ej progu (A) - Nieoficjalny przewodnik WCAG 2.1</title>
    <link rel="stylesheet" href="../styles.css">
</head>

<body>
    <a href="#main" class="skip-link">Przejd藕 do treci g贸wnej</a>

    <header>
        <!-- Zawarto zostanie zaadowana dynamicznie przez JavaScript -->
    </header>

    <main id="main">
        <article class="criterion-detail">
            <div class="criterion-header">
                <h2>2.3.1 Trzy byski lub poni偶ej progu</h2>
                <p class="criterion-level">Poziom A</p>
                <div class="meta">
                    <p><a href="https://www.w3.org/TR/WCAG21/#three-flashes-or-below-threshold" target="_blank"
                            rel="noopener">Oficjalna dokumentacja W3C</a></p>
                </div>
            </div>

            <div class="safety-warning"
                style="background-color: #f8d7da; border: 2px solid #f5c6cb; padding: 20px; margin: 20px 0; border-radius: 5px;">
                <h3 style="color: #721c24; margin-top: 0;">锔 OSTRZE呕ENIE BEZPIECZESTWA</h3>
                <p style="color: #721c24; font-weight: bold;">Ta strona zawiera informacje o migajcych treciach. Nigdy
                    nie testuj migajcych element贸w na sobie ani na innych osobach. U偶ywaj wycznie narzdzi
                    automatycznych do analizy.</p>
            </div>

            <div class="criterion-description">
                <h3>Opis kryterium</h3>
                <p>Strony internetowe nie zawieraj 偶adnych element贸w, kt贸re migaj wicej ni偶 trzy razy w cigu jednej
                    sekundy, lub miganie znajduje si poni偶ej og贸lnych prog贸w wywoujcych napady padaczkowe i czerwone
                    byski.</p>

                <h3>Intencja</h3>
                <p>Celem tego kryterium sukcesu jest umo偶liwienie u偶ytkownikom z padaczk fotogenn dostpu do treci
                    internetowych bez ryzyka wywoywania napad贸w. Migajce wiata w okrelonych czstotliwociach mog
                    wywoa napady padaczkowe u os贸b z padaczk fotogenn.</p>

                <p>Szczeg贸lnie niebezpieczne s:</p>
                <ul>
                    <li><strong>Miganie czstsze ni偶 3 Hz</strong> (3 byski na sekund)</li>
                    <li><strong>Czerwone byski</strong> - szczeg贸lnie niebezpieczne</li>
                    <li><strong>Du偶e obszary migajcych treci</strong> - powy偶ej 341 x 256 pikseli</li>
                    <li><strong>Wysokie kontrasty</strong> - nage zmiany jasnoci</li>
                </ul>
            </div>

            <div class="examples">
                <h3>Przykady</h3>

                <div class="example-container">
                    <div class="example bad">
                        <h4>Zy przykad - niebezpieczne miganie</h4>
                        <p>Element interfejsu, kt贸ry miga zbyt szybko i mo偶e wywoa napady padaczkowe:</p>

                        <div class="preview">
                            <div class="preview-content"
                                style="border: 1px solid #ccc; padding: 20px; border-radius: 5px; background-color: #fff;">
                                <p><strong>锔 Ten przykad jest WYCZONY ze wzgld贸w bezpieczestwa</strong></p>
                                <div
                                    style="background-color: #f8f8f8; border: 2px dashed #ccc; padding: 20px; text-align: center; color: #666;">
                                    <p>Tutaj byby element migajcy zbyt szybko</p>
                                    <p>(NIGDY nie implementuj takiego kodu)</p>
                                </div>
                            </div>
                        </div>

                        <pre><code class="language-css">/* NIGDY NIE U呕YWAJ - niebezpieczne miganie */
.dangerous-flashing {
    animation: dangerousFlash 0.1s infinite; /* 10 Hz - NIEBEZPIECZNE! */
}

@keyframes dangerousFlash {
    0% { background-color: white; }
    50% { background-color: red; }    /* Czerwone byski s szczeg贸lnie niebezpieczne */
    100% { background-color: white; }
}</code></pre>

                        <pre><code class="language-javascript">// NIGDY NIE U呕YWAJ - niebezpieczne miganie przez JavaScript
function dangerousFlashing() {
    const element = document.getElementById('flash-element');
    let isRed = false;
    
    // Miganie co 50ms = 20 Hz - BARDZO NIEBEZPIECZNE!
    setInterval(function() {
        if (isRed) {
            element.style.backgroundColor = 'white';
        } else {
            element.style.backgroundColor = 'red';
        }
        isRed = !isRed;
    }, 50); // NIGDY nie u偶ywaj tak kr贸tkich interwa贸w!
}</code></pre>

                        <p class="explanation">Problem: Element miga z czstotliwoci 10 Hz (10 razy na sekund), co
                            znacznie przekracza bezpieczny pr贸g 3 Hz. Dodatkowo u偶ywa czerwonych bysk贸w, kt贸re s
                            szczeg贸lnie niebezpieczne. Taki kod mo偶e wywoa napady padaczkowe u wra偶liwych os贸b.</p>
                    </div>
                </div>

                <div class="example-container">
                    <div class="example good">
                        <h4>Dobry przykad - bezpieczna animacja uwagi</h4>
                        <p>Element interfejsu, kt贸ry przyciga uwag bez ryzyka wywoania napad贸w:</p>

                        <div class="preview">
                            <div class="preview-content"
                                style="border: 1px solid #ccc; padding: 20px; border-radius: 5px; background-color: #fff;">
                                <div class="safe-attention"
                                    style="padding: 15px; background-color: #e7f3ff; border: 2px solid #3498db; border-radius: 5px; animation: safeGlow 2s ease-in-out infinite;">
                                    <h4 style="margin-top: 0; color: #2c3e50;"> Wa偶na informacja</h4>
                                    <p style="margin-bottom: 0;">Ta wiadomo u偶ywa bezpiecznej animacji, kt贸ra
                                        przyciga uwag bez ryzyka napad贸w padaczkowych.</p>
                                </div>
                            </div>
                        </div>

                        <pre><code class="language-css">/* Bezpieczna animacja - wolne, subtelne wiecenie */
.safe-attention {
    animation: safeGlow 2s ease-in-out infinite;
}

@keyframes safeGlow {
    0% { 
        border-color: #3498db; 
        box-shadow: 0 0 5px rgba(52, 152, 219, 0.3);
    }
    50% { 
        border-color: #2980b9; 
        box-shadow: 0 0 15px rgba(52, 152, 219, 0.6);
    }
    100% { 
        border-color: #3498db; 
        box-shadow: 0 0 5px rgba(52, 152, 219, 0.3);
    }
}

/* Respektowanie preferencji u偶ytkownika */
@media (prefers-reduced-motion: reduce) {
    .safe-attention {
        animation: none;
        border-color: #3498db;
        box-shadow: 0 0 5px rgba(52, 152, 219, 0.3);
    }
}</code></pre>

                        <p class="explanation">Rozwizanie: Animacja trwa 2 sekundy (0.5 Hz), co jest znacznie poni偶ej
                            bezpiecznego progu 3 Hz. U偶ywa subtelnych zmian koloru zamiast ostrych przej midzy jasnym
                            a ciemnym. Dodatkowo respektuje preferencje u偶ytkownika dotyczce redukcji ruchu.</p>
                    </div>
                </div>

                <div class="example-container">
                    <div class="example good">
                        <h4>Dobry przykad - bezpieczny wska藕nik adowania</h4>
                        <p>Animowany wska藕nik postpu, kt贸ry nie powoduje migania:</p>

                        <div class="preview">
                            <div class="preview-content"
                                style="border: 1px solid #ccc; padding: 20px; border-radius: 5px; background-color: #fff;">
                                <div style="margin-bottom: 15px;">
                                    <label for="safe-progress">Bezpieczny wska藕nik postpu:</label>
                                </div>
                                <div
                                    style="background-color: #f0f0f0; border-radius: 10px; height: 20px; overflow: hidden; position: relative;">
                                    <div
                                        style="background: linear-gradient(90deg, #4CAF50, #45a049); height: 100%; width: 60%; border-radius: 10px; position: relative;">
                                        <div
                                            style="position: absolute; top: 0; left: 0; right: 0; bottom: 0; background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent); animation: progressShine 3s ease-in-out infinite;">
                                        </div>
                                    </div>
                                </div>
                                <div style="margin-top: 10px; text-align: center; font-size: 0.9em; color: #666;">
                                    adowanie... 60%
                                </div>
                            </div>
                        </div>

                        <pre><code class="language-css">/* Bezpieczny wska藕nik postpu */
.progress-bar {
    background-color: #f0f0f0;
    border-radius: 10px;
    height: 20px;
    overflow: hidden;
    position: relative;
}

.progress-fill {
    background: linear-gradient(90deg, #4CAF50, #45a049);
    height: 100%;
    border-radius: 10px;
    position: relative;
    transition: width 0.3s ease; /* Pynne zmiany bez migania */
}

.progress-shine {
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(90deg, 
        transparent, 
        rgba(255,255,255,0.3), 
        transparent
    );
    animation: progressShine 3s ease-in-out infinite;
}

@keyframes progressShine {
    0% { transform: translateX(-100%); }
    100% { transform: translateX(100%); }
}

/* Bezpieczny spinner - obracanie zamiast migania */
.safe-spinner {
    border: 3px solid #f3f3f3;
    border-top: 3px solid #3498db;
    border-radius: 50%;
    width: 30px;
    height: 30px;
    animation: spin 1s linear infinite;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}</code></pre>

                        <p class="explanation">Rozwizanie: Wska藕nik postpu u偶ywa pynnych przej i obracajcych si
                            element贸w zamiast migania. Efekt "bysku" przesuwa si przez pasek w tempie 0.33 Hz (jeden
                            cykl na 3 sekundy), co jest bezpieczne.</p>
                    </div>
                </div>

                <div class="example-container">
                    <div class="example good">
                        <h4>Dobry przykad - ostrze偶enie przed migajc treci</h4>
                        <p>Implementacja ostrze偶enia przed treci, kt贸ra mo偶e zawiera miganie:</p>

                        <div class="preview">
                            <div class="preview-content"
                                style="border: 1px solid #ccc; padding: 20px; border-radius: 5px; background-color: #fff;">
                                <div id="seizure-warning"
                                    style="background-color: #fff3cd; border: 2px solid #ffc107; padding: 20px; border-radius: 5px; margin-bottom: 20px;">
                                    <h4 style="color: #856404; margin-top: 0;">锔 Ostrze偶enie o migajcych treciach
                                    </h4>
                                    <p style="color: #856404;">Poni偶sza tre mo偶e zawiera migajce elementy. Jeli
                                        cierpisz na padaczk fotogenn lub jeste wra偶liwy na migajce wiata, nie
                                        ogldaj tej treci.</p>
                                    <div style="margin-top: 15px;">
                                        <button id="acknowledge-warning"
                                            style="background-color: #28a745; color: white; border: none; padding: 10px 20px; border-radius: 4px; margin-right: 10px; cursor: pointer;">Rozumiem
                                            i chc kontynuowa</button>
                                        <button id="skip-content"
                                            style="background-color: #6c757d; color: white; border: none; padding: 10px 20px; border-radius: 4px; cursor: pointer;">Pomi
                                            t tre</button>
                                    </div>
                                </div>

                                <div id="protected-content"
                                    style="display: none; background-color: #f8f9fa; padding: 20px; border-radius: 5px;">
                                    <h4>Chroniona tre</h4>
                                    <p>Tutaj byaby tre, kt贸ra mo偶e zawiera miganie (np. video, animacje, gry).</p>
                                    <button
                                        style="background-color: #dc3545; color: white; border: none; padding: 8px 16px; border-radius: 4px;">Zatrzymaj
                                        wszystkie animacje</button>
                                </div>
                            </div>
                        </div>

                        <pre><code class="language-javascript">// System ostrze偶e przed migajcymi treciami
class SeizureWarningSystem {
    constructor() {
        this.warningShown = false;
        this.contentBlocked = true;
        this.init();
    }

    init() {
        this.setupWarningHandlers();
        this.checkUserPreferences();
    }

    setupWarningHandlers() {
        const acknowledgeBtn = document.getElementById('acknowledge-warning');
        const skipBtn = document.getElementById('skip-content');

        acknowledgeBtn?.addEventListener('click', () => {
            this.acknowledgeWarning();
        });

        skipBtn?.addEventListener('click', () => {
            this.skipContent();
        });
    }

    acknowledgeWarning() {
        // Zapisz decyzj u偶ytkownika
        localStorage.setItem('seizureWarningAcknowledged', 'true');
        
        // Ukryj ostrze偶enie i poka偶 tre
        document.getElementById('seizure-warning').style.display = 'none';
        document.getElementById('protected-content').style.display = 'block';
        
        this.contentBlocked = false;
        this.addEmergencyStop();
    }

    skipContent() {
        // Przekieruj do bezpiecznej alternatywy
        window.location.href = '#safe-alternative';
    }

    addEmergencyStop() {
        // Dodaj mo偶liwo natychmiastowego zatrzymania animacji
        const stopButton = document.createElement('button');
        stopButton.textContent = 'STOP - Zatrzymaj wszystkie animacje';
        stopButton.style.cssText = `
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 9999;
            background-color: #dc3545;
            color: white;
            border: none;
            padding: 10px 15px;
            border-radius: 5px;
            font-weight: bold;
            cursor: pointer;
        `;
        
        stopButton.addEventListener('click', () => {
            this.emergencyStop();
        });
        
        document.body.appendChild(stopButton);
    }

    emergencyStop() {
        // Zatrzymaj wszystkie animacje CSS
        const style = document.createElement('style');
        style.textContent = `
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        `;
        document.head.appendChild(style);

        // Zatrzymaj wszystkie video
        document.querySelectorAll('video').forEach(video => {
            video.pause();
        });

        // Zatrzymaj wszystkie timery JavaScript
        for (let i = 1; i < 99999; i++) {
            window.clearInterval(i);
            window.clearTimeout(i);
        }

        alert('Wszystkie animacje zostay zatrzymane.');
    }

    checkUserPreferences() {
        // Sprawd藕 preferencje systemowe
        if (window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
            // Automatycznie blokuj migajce treci
            this.skipContent();
        }

        // Sprawd藕 wczeniejsze decyzje u偶ytkownika
        if (localStorage.getItem('seizureWarningAcknowledged') === 'true') {
            // Nadal poka偶 ostrze偶enie, ale z opcj szybkiego potwierdzenia
            this.showQuickAcknowledge();
        }
    }

    showQuickAcknowledge() {
        const warning = document.getElementById('seizure-warning');
        warning.innerHTML = `
            <p><strong>Wczeniej zaakceptowae ostrze偶enie o migajcych treciach.</strong></p>
            <button onclick="seizureWarning.acknowledgeWarning()">Kontynuuj</button>
            <button onclick="seizureWarning.skipContent()">Pomi</button>
        `;
    }
}

// Inicjalizacja systemu ostrze偶e
const seizureWarning = new SeizureWarningSystem();</code></pre>

                        <p class="explanation">Rozwizanie: System ostrze偶e informuje u偶ytkownik贸w o potencjalnie
                            niebezpiecznych treciach i daje im wyb贸r. Zawiera funkcj awaryjnego zatrzymania wszystkich
                            animacji oraz respektuje preferencje systemowe u偶ytkownika dotyczce ruchu.</p>
                    </div>
                </div>
            </div>

            <div class="testing">
                <h3>Testowanie</h3>
                <h4>Narzdzia do automatycznej analizy</h4>
                <ul>
                    <li><strong>PEAT (Photosensitive Epilepsy Analysis Tool)</strong> - darmowe narzdzie od Trace
                        Center</li>
                    <li><strong>FKA (Flash and Pattern Analyzer)</strong> - profesjonalne narzdzie do analizy</li>
                    <li><strong>Web Developer Tools</strong> - sprawdzanie czstotliwoci animacji CSS</li>
                </ul>

                <h4>Procedura testowa</h4>
                <ol>
                    <li>Zidentyfikuj wszystkie migajce, byskajce lub szybko zmieniajce si elementy</li>
                    <li>U偶yj narzdzi automatycznych do analizy czstotliwoci migania</li>
                    <li>Sprawd藕, czy czstotliwo nie przekracza 3 Hz (3 byski na sekund)</li>
                    <li>Zwr贸 szczeg贸ln uwag na czerwone byski</li>
                    <li>Przetestuj na r贸偶nych rozmiarach ekranu - du偶e obszary s bardziej niebezpieczne</li>
                    <li>Upewnij si, 偶e u偶ytkownicy s ostrzegani przed problematycznymi treciami</li>
                </ol>

                <h4>锔 Wa偶ne zasady bezpieczestwa podczas testowania</h4>
                <ul>
                    <li><strong>NIGDY nie testuj migajcych treci na sobie</strong></li>
                    <li><strong>NIGDY nie pro innych o testowanie migajcych treci</strong></li>
                    <li><strong>U偶ywaj WYCZNIE narzdzi automatycznych</strong></li>
                    <li>W przypadku wtpliwoci, usu migajce elementy cakowicie</li>
                </ul>
            </div>

            <div class="technical-details">
                <h3>Szczeg贸y techniczne</h3>
                <h4>Progi bezpieczestwa wedug WCAG:</h4>
                <ul>
                    <li><strong>Og贸lny pr贸g migania:</strong> maksymalnie 3 byski na sekund</li>
                    <li><strong>Pr贸g dla czerwonych bysk贸w:</strong> znacznie ni偶szy ni偶 dla innych kolor贸w</li>
                    <li><strong>Rozmiar obszaru:</strong> miganie w obszarze wikszym ni偶 341 x 256 pikseli jest
                        bardziej niebezpieczne</li>
                    <li><strong>Kontrast wzgldny:</strong> zmiana jasnoci powy偶ej 10% mo偶e by problematyczna przy
                        wysokich czstotliwociach</li>
                </ul>

                <h4>Bezpieczne alternatywy dla migania:</h4>
                <ul>
                    <li><strong>Fade in/out:</strong> pynne pojawianie si i znikanie</li>
                    <li><strong>Obracanie:</strong> animacje rotacyjne</li>
                    <li><strong>Przesuwanie:</strong> pynne ruchy translacyjne</li>
                    <li><strong>Skalowanie:</strong> stopniowe zmiany rozmiaru</li>
                    <li><strong>Zmiana koloru:</strong> pynne przejcia midzy kolorami</li>
                </ul>
            </div>

            <div class="resources">
                <h3>Dodatkowe zasoby</h3>
                <ul>
                    <li><a href="https://www.w3.org/WAI/WCAG21/Understanding/three-flashes-or-below-threshold.html"
                            target="_blank" rel="noopener">Zrozumie WCAG 2.1: Trzy byski lub poni偶ej progu</a></li>
                    <li><a href="https://trace.umd.edu/peat/" target="_blank" rel="noopener">PEAT - Photosensitive
                            Epilepsy Analysis Tool</a></li>
                    <li><a href="https://www.epilepsy.com/learn/triggers-seizures/photosensitivity-and-seizures"
                            target="_blank" rel="noopener">Epilepsy Foundation: Photosensitivity and Seizures</a></li>
                    <li><a href="https://developer.mozilla.org/en-US/docs/Web/CSS/@media/prefers-reduced-motion"
                            target="_blank" rel="noopener">MDN: prefers-reduced-motion</a></li>
                </ul>
            </div>

            <nav class="criterion-nav" aria-label="Nawigacja kryteri贸w">
                <ul>
                    <li><a href="2.3.html">Poprzedni: 2.3 Ataki padaczki i reakcje fizyczne</a></li>
                    <li><a href="2.3.2.html">Nastpny: 2.3.2 Trzy byski</a></li>
                </ul>
            </nav>
        </article>
    </main>

    <footer>
        <!-- Zawarto zostanie zaadowana dynamicznie przez JavaScript -->
    </footer>

    <script src="../script.js"></script>

    <style>
        /* Bezpieczne styles dla animacji na tej stronie */
        @keyframes safeGlow {
            0% {
                border-color: #3498db;
                box-shadow: 0 0 5px rgba(52, 152, 219, 0.3);
            }

            50% {
                border-color: #2980b9;
                box-shadow: 0 0 15px rgba(52, 152, 219, 0.6);
            }

            100% {
                border-color: #3498db;
                box-shadow: 0 0 5px rgba(52, 152, 219, 0.3);
            }
        }

        @keyframes progressShine {
            0% {
                transform: translateX(-100%);
            }

            100% {
                transform: translateX(100%);
            }
        }

        /* Respektowanie preferencji u偶ytkownika */
        @media (prefers-reduced-motion: reduce) {
            * {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }
    </style>
</body>

</html>